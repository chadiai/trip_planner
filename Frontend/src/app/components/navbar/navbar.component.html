<nav class="py-2 md:py-4 z-50 bg-white">
  <div class="flex justify-between flex-row items-center">
    <div>
      <!-- <a href="#" class="lg:hidden inline-block w-10 ml-3"><img src="../../assets/images/travel_planner_logo.svg" alt="Trip planner logo"></a> -->
      <a href="#" class="mx-3 md:hidden"><img src="../../assets/images/travel_planner_logo.svg" alt="Trip planner logo"
          class="h-[43px] inline-block"></a>
      <!-- Title (Visible on large screens) -->
      <a href="#" class="hidden md:inline-block mx-5 font-bold text-2xl text-primary ">Trip Planner</a>

      <!-- Navigation links -->
      <a class="p-2 mx-2 text-black rounded hover:underline underline-offset-4 transition-colors duration-300 hidden sm:inline-block"
        routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">Home</a>
      <a class="p-2 mx-2 text-black rounded hover:underline underline-offset-4 transition-colors duration-300"
        routerLink="/planner" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">Trip Planner</a>
      <!-- <a class="p-2 mx-2 text-black rounded hover:underline underline-offset-4 transition-colors duration-300"
        routerLink="/trips/public" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">Public trips</a> -->
      <!-- <a routerLink="/trips/public" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">Public trips</a> -->

      <!-- Dropdown menu -->
      <div
        class="p-2 mx-2 text-black rounded hover:underline underline-offset-4 transition-colors duration-300 relative inline-block text-left"
        (mouseleave)="closeAdminDropDown()">
        <button id="dropdownNavbarLink" (mouseenter)="onAdminDropDown()" class="flex justify-between items-center">Trips
          <svg class="ml-1 w-5 h-5" aria-hidden="true" fill="currentColor" viewBox="0 0 20 20"
            xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd"
              d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
              clip-rule="evenodd"></path>
          </svg></button>
        <div id="dropdownNavbar" *ngIf="adminDropdownOpen"
          class="absolute left-0 z-10 mt-1 w-32 origin-top-left rounded-md bg-white shadow-lg ring-2 ring-black ring-opacity-5 focus:outline-none">
          <a *ngIf="(auth.isAuthenticated$ | async)" (click)="navigateTo('trips/all')"
            class="hover:bg-gray-100 p-2 cursor-pointer rounded-md hover:text-accent transition-colors duration-300 flex px-2">All my
            trips</a>
          <a (click)="navigateTo('trips/public')"
            class="hover:bg-gray-100 p-2 cursor-pointer rounded-md hover:text-accent transition-colors duration-300 flex px-2">Public
            trips</a>
        </div>
      </div>
    </div>
    <div class="mx- lg:mx-5">
      <a *ngIf="!(auth.isAuthenticated$ | async); else logoutButton " (click)="auth.loginWithPopup()">
        <button type="button"
          class="text-white bg-accent hover:bg-white hover:text-accent focus:outline-none focus:ring-4 focus:ring-blue font-medium rounded-full text-sm px-5 py-2.5 text-center mr-2 mb-2">
          <i class="fa-solid fa-user sm:hidden"></i><span class="hidden sm:inline-block">Login</span>
        </button>
      </a>
      <ng-template #logoutButton>
        <div class="relative inline-block text-left">
          <button type="button" class="group inline-flex justify-center w-full px-4 py-2 text-sm"
            (click)="toggleMenu()">
            <img src="{{loggedInUser?.picture}}" class="w-9 h-9 rounded-full" alt="Profile picture">
          </button>
          <div>
            <ul
              class="hidden absolute right-0 mt-2 w-48 py-2 bg-white border border-gray-300 rounded-lg shadow-lg group-hover:block"
              [ngClass]="{ 'hidden': !toggleDropdown }">
              <li>
                <a class="block px-2 py-2 cursor-pointer hover:bg-slate-100" (click)="navitageUserProfile()">
                  <span><i class="fa-solid fa-user"></i> User Profile</span>
                </a>
              </li>
              <li>
                <hr class="my-1">
              </li>
              <li>
                <div class="flex cursor-pointer hover:bg-slate-100" (click)="handleLogout()">
                  <span class="block px-2 py-2 ml-1 "><i class="fa-solid fa-right-from-bracket"></i> Logout</span> 
                </div>
              </li>
            </ul>
          </div>
        </div>
      </ng-template>
    </div>
  </div>
</nav>
